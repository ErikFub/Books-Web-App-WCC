<HTML>

    <HEAD>
        <TITLE>My Favourite Books</TITLE>
        <META charset="utf8" />
        <LINK rel="stylesheet" href="./common.css" />
        <LINK rel="stylesheet" href="./statistics.css" />
        <script src="./script.js"></script>
        <script src="./common.js"></script>
        <script src="./statistics.js"></script>
    </HEAD>
    
    <BODY>
        <HEADER>
            <DIV class="title-frame"></DIV>
            <DIV id="titlebox">
                <H1 id="title">My Favourite Books</H1>
            </DIV>
            <NAV class="navbar title-frame">
                <div id="menuicon">&#9776;</div>
                <ul id="nav-links">
                    <li class="navitem">
                        <button class="navbutton sn" onclick="toggleSubnav('menu')" id="menu-bt">Menu</button>
                        <ul class="subnav hidden" id="menu-sn">
                            <li class="sn"><a href="./index.html">Menu</a></li>
                            <li class="sn"><a href="./addbook.html">Add Book</a></li>
                        </ul>
                    </li>
                </ul>
            </NAV>
        </HEADER>
        <div id="sidesection">
            <ASIDE id="sidebar">
                <h3>Maria Diniz</h3>
                <p><a href="">Profile</a></p>
                <p><a href="">Preferences</a></p>
                <h3>Categories</h3>
                <p><a href="">Drama (1)</a></p>
                <p><a href="">Historical Romance (2)</a></p>
                <p><a href="">Science Fiction (5)</a></p>
                <h3>Collections</h3>
                <p><a href="">Holidays (4)</a></p>
                <p><a href="">All timers (10)</a></p>
            </ASIDE>
        </div>
        <SECTION>
              <div>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1">
                <title>Charts</title>
              </div>
              <body>
                <div class="chartMenu">
                </div>
                <div class="chartCard">

                  <div class="chartBox">
                    <canvas id="myChart"></canvas>
                  </div>

                  <div class="chartBox">
                    <canvas id="myChart2"></canvas>
                  </div>

                </div>
                <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>


                // // Fetch Block
                // function updateChart() {
                //     async function fetchData() {
                //         const url = 'http://127.0.0.1:5500/public/books.json';
                //         const response = await fetch(url);
                //         // wait until request has been completed
                //         const datapoints = await response.json();
                //         console.log(datapoints);
                //         return datapoints
                //     };
                //     fetchData().then(datapoints => {
                //         const ratings = datapoints.books.map(
                //             function(index){
                //                 return index.rating;
                //         })
                //         console.log(rating);
                //         myChart.config.data.datasets.data = rating;
                //         myChart.updateChart()
                //     });
                // };


                // setup Chart
                const data1 = {
                  labels: ['1', '2', '3', '4', '5'],
                  datasets: [{
                    label: 'Number of Books per Rating',
                    data: [2, 3, 5, 3, 1],
                    backgroundColor: [
                    'rgba(255, 26, 104, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    ],
                    borderColor: [
                    'rgba(255, 26, 104, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    ],
                    borderWidth: 1
                  }]
                };

                // config Chart
                const config = {
                  type: 'bar',
                  data: data1,
                  options: {
                    scales: {
                      y: {
                        beginAtZero: true
                      }
                    },
                    plugins: {
                      legend: {
                        display: false
                      },
                      title: {
                        display: true,
                        text: 'Distribution of Books per Rating'
                      }
                    }
                  }
                };

                // render init block Chart
                const myChart = new Chart(
                  document.getElementById('myChart'),
                  config
                );


                // setup Chart2
                const data2 = {
                  labels: ['Author1', 'Author2', 'Author3'],
                  datasets: [{
                    label: 'Number of Books per Author',
                    data: [5, 3, 1],
                    backgroundColor: [
                      'rgba(20, 20, 235, 0.5)',
                      'rgba(20, 100, 235, 0.5)',
                      'rgba(20, 180, 235, 0.5)',
                    ],
                    borderColor: [
                      'rgba(20, 20, 235, 1)',
                      'rgba(20, 100, 235, 1)',
                      'rgba(20, 180, 235, 1)',
                    ],
                    borderWidth: 1
                  }]
                };

                // config Chart2
                const config2 = {
                  type: 'bar',
                  data: data2,
                  options: {
                      indexAxis: 'y',
                      scales: {
                        y: {
                          beginAtZero: true
                      }
                    },
                    plugins: {
                      legend: {
                        display: false
                      },
                      title: {
                        display: true,
                        text: 'Number of Books per Top 3 Authors'
                      }
                    }
                  }
                };

                // render init block Chart2
                const myChart2 = new Chart(
                  document.getElementById('myChart2'),
                  config2
                );
                </script>

        </SECTION>
      
        <FOOTER>
            <div id="contact">
                <p>E-mail: <a href="">joe@someemail.somewhere</a></p>
                <p>Phone: 555 888 333</p>
                <p>&nbsp;</p>
            </div>
            <div id="sections">
                <p><a href="">Section 1</a></p>
                <p><a href="">Section 2</a></p>
                <p><a href="">Section 3</a></p>
            </div>
        </FOOTER>
    </BODY>
    
    </HTML>