<HTML>

    <HEAD>
        <TITLE>My Favourite Books</TITLE>
        <META charset="utf8" />
        <LINK rel="stylesheet" href="books.css" />
        <LINK rel="stylesheet" href="general.css" />
        <LINK rel="stylesheet" href="statistics.css" />
        <script src="script.js"></script>
    </HEAD>
    
    <BODY>
        <HEADER>
            <DIV class="title-frame"></DIV>
            <DIV id="titlebox">
                <H1 id="title">My Favourite Books</H1>
            </DIV>
            <NAV class="navbar title-frame">
                <div id="menuicon">&#9776;</div>
                <ul id="nav-links">
                    <li class="navitem">
                        <button class="navbutton sn" onclick="toggleSubnav('menu')" id="menu-bt">Menu</button>
                        <ul class="subnav hidden" id="menu-sn">
                            <li class="sn"><a href="/index.html">Menu</a></li>
                            <li class="sn"><a href="/addbook.html">Add Book</a></li>
                        </ul>
                    </li>
                </ul>
            </NAV>
        </HEADER>
        <div id="sidesection">
            <ASIDE id="sidebar">
                <h3>Maria Diniz</h3>
                <p><a href="">Profile</a></p>
                <p><a href="">Preferences</a></p>
                <h3>Categories</h3>
                <p><a href="">Drama (1)</a></p>
                <p><a href="">Historical Romance (2)</a></p>
                <p><a href="">Science Fiction (5)</a></p>
                <h3>Collections</h3>
                <p><a href="">Holidays (4)</a></p>
                <p><a href="">All timers (10)</a></p>
            </ASIDE>
        </div>
        <SECTION>
              <div>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1">
                <title>Distribution of Number of Books per Rating</title>
              </div>
              <body>
                <div class="chartMenu">
                </div>
                <div class="chartCard">
                  <div class="chartBox">
                    <canvas id="myChart"></canvas>
                    <button onclick="fetchData()">Fetch Now</button>
                  </div>
                </div>
                <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>

                // // Fetch Block
                // function updateChart() {
                //     async function fetchData() {
                //         const url = 'http://127.0.0.1:5500/public/books.json';
                //         const response = await fetch(url);
                //         // wait until request has been completed
                //         const datapoints = await response.json();
                //         console.log(datapoints);
                //         return datapoints
                //     };
                //     fetchData().then(datapoints => {
                //         const ratings = datapoints.books.map(
                //             function(index){
                //                 return index.rating;
                //         })
                //         console.log(rating);
                //         myChart.config.data.datasets.data = rating;
                //         myChart.updateChart()
                //     });
                // };


                // setup 
                const data = {
                  labels: ['1', '2', '3', '4', '5'],
                  datasets: [{
                    label: 'Number of Books per Rating',
                    data: [2, 3, 5, 3, 1],
                    backgroundColor: [
                      'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                      'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                  }]
                };
            
                // config 
                const config = {
                  type: 'bar',
                  data,
                  options: {
                    scales: {
                      y: {
                        beginAtZero: true
                      }
                    }
                  }
                };
            
                // render init block
                const myChart = new Chart(
                  document.getElementById('myChart'),
                  config
                );
                </script>
        </SECTION>
      
        <FOOTER>
            <div id="contact">
                <p>E-mail: <a href="">joe@someemail.somewhere</a></p>
                <p>Phone: 555 888 333</p>
                <p>&nbsp;</p>
            </div>
            <div id="sections">
                <p><a href="">Section 1</a></p>
                <p><a href="">Section 2</a></p>
                <p><a href="">Section 3</a></p>
            </div>
        </FOOTER>
    </BODY>
    
    </HTML>